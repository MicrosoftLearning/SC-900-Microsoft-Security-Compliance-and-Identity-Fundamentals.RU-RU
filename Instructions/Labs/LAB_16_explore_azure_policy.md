<!---
---
Практическое занятие. Заголовок: "Изучение Политики Azure" Схема обучения/Модуль/Урок: "Схема обучения. Описание возможностей соответствия требованиям Майкрософт; Модуль 6. Описание возможностей управления ресурсами в Azure; Урок 2. Описание Политики Azure"
---
--->

# Задание: Знакомство с Политикой Azure

Это практическое занятие выполняется на основе следующего содержимого Learn:

- Схема обучения. Описание возможностей соответствия требованиям Майкрософт
- Модуль. Описание возможностей управления ресурсами в Azure
- Урок. Описание Политики Azure

## Сценарий практической работы

Политика Azure помогает применять организационные стандарты и оценивать соответствие в больших масштабах. Политика Azure оценивает ресурсы в Azure, сравнивая их свойства с настроенными бизнес-правилами. В этом задании вы создадите политику и увидите ее воздействие.  Вы также изучите сведения о соответствии и исправлении, доступные на странице политики.

**Предполагаемое время:** 15-20 мин.

### Задача 1

В рамках этой задачи вы создадите базовое назначение политики, требующее, чтобы группа ресурсов помечалась тегом.
1.  Откройте Microsoft Edge. В адресной строке введите **portal.azure.com**.

1. Войдите с учетными данными администратора для подписки Azure (они отличаются от учетных данных администратора Microsoft 365).
    1. В окне входа введите **User1-XXXXXXXX@LODSPRODMSLEARNMCA.onmicrosoft.com** (где XXXXXXXX — уникальный идентификатор клиента, предоставленный поставщиком услуг размещения практических занятий), а затем нажмите кнопку **Далее**.

    1. Введите пароль администратора, предоставленный поставщиком услуг размещения практических занятий. Выберите **Вход.**
    1. При появлении предложения не выходить из системы выберите **Да**.

1. Вы попадете на портал Azure.  В поле поиска, которое расположено на синей верхней панели рядом с надписью Microsoft Azure, введите **политика**, а затем выберите **Политика** из результатов поиска. Это приведет к открытию домашней страницы "Политика" с панелью мониторинга.  Областью для представления панели мониторинга является подписка Azure, предоставляемая авторизованным поставщиком услуг размещения практических занятий (ALH). В списке вы увидите политику, созданную ALH для использования с подпиской Azure.

1. На панели навигации слева в разделе "Разработка" выберите **Назначения**.

1. В верхней части страницы выберите пункт **Назначить политику**. Открывается мастер назначения политики с инструкциями администратору по назначению политики.

1. Начните с вкладки "Основы".
    1. Для параметра "Область" оставьте значение по умолчанию. В этом случае областью политики является подписка Azure, предоставляемая авторизованным поставщиком услуг размещения практических занятий (ALH).
    1. В разделе "Определение политики" щелкните **многоточие**.  Предоставляется список доступных определений политик.  В строке поиска введите **Требовать тег**. В результатах поиска выберите **Требовать тег в группе ресурсов** (может потребоваться прокрутить вниз), а затем нажмите кнопку **Добавить**.  Примечание. Эффект этой политики заключается в том, чтобы Запретить создание любой новой группы ресурсов, которая не соответствует требованию.  
    1. Обратите внимание на имя назначения по умолчанию.  Оставьте имя без изменения.
    1. Для параметра Применение политик должно быть обязательно задано значение **Включено**

1. Нажмите кнопку **Далее**, а затем снова нажмите **Далее**, чтобы перейти на вкладку "Параметры" (также можно просто выбрать вкладку параметров напрямую).

1. Теперь вы перейдете на вкладку "Параметры". В поле "Имя тега" введите **Среда** и нажмите кнопку **Далее**.

1. На вкладке "Исправление" оставьте значения по умолчанию и нажмите кнопку **Далее**.

1. Теперь вы попадете на вкладку "Сообщения о несоответствии требованиям". В поле сообщения о несоответствии введите **Требуется тег среды**, а затем нажмите кнопку **Далее**. Примечание. Это сообщение будет отображаться в качестве причины несоответствия для групп ресурсов, созданных до назначения политики и не имеющих тега Среды.

1. Просмотрите назначение политики и выберите команду **Создать**.  Если политика не отображается сразу, нажмите **Обновить**. Примечание. Вступление политики в действие может занять до 30 минут, хотя, как правило, это происходит быстрее.

1. Закройте страницу "Назначения политики", нажав **X** в правом верхнем углу экрана.

1. Откроется домашняя страница служб Azure.  Держите ее открытой: она понадобится для следующей задачи.

### Задача 2

В рамках этой задачи вы оцените воздействие назначения политики Azure. Для этого надо будет попытаться создать группу ресурсов в Azure, которая не имеет тега.

1. Откройте вкладку браузера, Главная — Microsoft Azure.

1. В верхней части страницы под надписью "Службы Azure" выберите **Группы ресурсов**.

1. В верхнем левом углу страницы нажмите **+ Создать**.

1. На вкладке "Основы" экрана "Создание группы ресурсов" оставьте поле "Подписка" без изменения.

1. В поле группы ресурсов введите **SC900-Labs**.

1. Оставьте значение по умолчанию для параметра "Регион", затем выберите **Далее: теги**

1. Оставьте поле тега "Название и значение" пустым.  НЕ ЗАПОЛНЯЙТЕ, а затем выберите **Просмотр и создание**.

1. Появится сообщение о прохождении проверки (имя и значение тега не являются обязательными полями в мастере). Выберите команду **Создать**.

1. В верхней части экрана появится сообщение об ошибке: "Не удалось создать группу ресурсов". Выберите **Просмотреть сведения об ошибке**. Условие, которое является частью политики Azure, не было выполнено, поэтому создание группы ресурсов было заблокировано по причине несоответствия требованиям. Примечание. Если вы не видите сообщение об ошибке, а группа ресурсов была создана, это связано с тем, что политика еще не вступила в силу.  Откройте страницу "Политика" для политики, созданной в рамках предыдущей задачи. Как только политика вступит в силу, вы увидите, что ресурс не соответствует требованиям.  Страница сведений будет содержать сообщение о несоответствии.

1. Сводка об ошибке показывает тип ошибки "Ресурс "SC900-Labs" запрещен политикой".  Закройте это окно, щелкнув значок **X** в правом верхнем углу экрана.

1. В окне "Создание группы ресурсов" выберите **Назад**.

1. Вы вернетесь на страницу "Теги" для создания группы ресурсов.  В поле "Имя" введите "Среда", в поле "Значение" введите **SC900-Labs**, а затем выберите **Далее: Проверка + Создание >**.

1. Проверьте тег и щелкните **Создать**.

1. В поле "Имя" введите **Среда**, а в поле "Значение" — **Лабораторная** (значение может быть любым; политика просто требует наличия значения тега). Затем выберите **Далее: проверка и создание >** и **Создать**.

1. Вы увидите группу ресурсов в списке.  

1. В строке навигации в верхней части страницы выберите **Главная**, чтобы вернуться на домашнюю страницу Azure.

1. Не закрывайте вкладку браузера, так как она понадобится для следующей задачи.

### Задача 3 (необязательная)

В этой задаче вы выполните действия по исправлению группы ресурсов, не соответствующей требованиям. ПРИМЕЧАНИЕ. В подписке Azure, используемой для задания, обновление состояния соответствия для исправленной группы ресурсов будет происходить с более длительной задержкой, чем обычно.

1. На домашней странице Azure выберите **Политика**. Это приведет к открытию домашней страницы "Политика" с панелью мониторинга.  Областью для представления панели мониторинга является подписка Azure, предоставляемая авторизованным поставщиком услуг размещения практических занятий.  

1. Вы увидите созданную ранее политику. Выберите ее.

1. В верхней части страницы в разделе Essentials можно увидеть имя, описание и другие важные сведения.  Обратите внимание, что политика отображается как несоответствующая требованиям.  Выберите политику, чтобы получить дополнительные сведения о том, почему она не соответствует требованиям. Вы увидите, что ресурс, указанный как resourgegroup1, не соответствует требованиям.  Это пример группы ресурсов, которая была создана до создания политики. Выберите пункт **Подробности**, чтобы получить дополнительные сведения.  Вы увидите сообщение о соответствии требованиям, в котором говорится, что требуется тег среды.  Щелкните значок **X** в правом верхнем углу, чтобы закрыть окно.

1. Выберите **resourcegroup1**, а затем в верхней части страницы выберите **Просмотреть ресурс**.
    1. Рядом с надписью "Теги" выберите команду **изменить**.
    1. Поместите курсор мыши в поле "Тег" и выберите **Среда**.
    1. Поместите курсор мыши в поле "Значение" и выберите **Лабораторная**, а затем нажмите кнопку **Сохранить**.

1. Теперь вернитесь на страницу политики.  Поместите курсор мыши в синее поле поиска в верхней части страницы и выберите **Политика**.

1. На панели навигации слева выберите **Соответствие**.  Как и на странице обзора, здесь можно просмотреть состояние соответствия перечисленных политик и/или инициатив.  ПРИМЕЧАНИЕ. Хотя вы добавили тег в группу ресурсов, обновление состояния займет некоторое время.  В подписках Azure, используемых для лабораторных целей, задержки могут превышать обычные. Если вы хотите дождаться обновления состояния соответствия для этого ресурса, не завершайте задание. В зависимости от лабораторной среды обновление может занять час или больше.  

### Отзыв

В этом задании вы выполнили процесс создания назначения политики Azure и увидели воздействие этой политики.

